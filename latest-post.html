<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>Latest Moroccan Tape Stash Post</title>

<style>
body {
  font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
  margin: 0;
}
img {
  max-width: 100%;
  height: auto;
}
</style>
</head>

<body>

<div id="post">Loading latest postâ€¦</div>

<script>
function show(feed) {
  if (!feed.feed || !feed.feed.entry || !feed.feed.entry.length) {
    document.getElementById("post").textContent = "No posts found.";
    return;
  }

  const post = feed.feed.entry[0];
  const contentHTML = post.content.$t;

  const doc = new DOMParser().parseFromString(contentHTML, "text/html");

  // First image (unchanged)
  const img = doc.querySelector("img");

  // Remove images so text extraction is clean
  doc.querySelectorAll("img").forEach(img => img.remove());

  // Find first meaningful text block
  let firstText = "";
  const candidates = doc.body.querySelectorAll("p, div, span");

  for (const el of candidates) {
    const text = el.textContent.replace(/\s+/g, " ").trim();
    if (text.length > 40) {   // avoids captions / crumbs
      firstText = text;
      break;
    }
  }

  document.getElementById("post").innerHTML = `
    <h3>${post.title.$t}</h3>
    ${img ? `<img src="${img.src}">` : ""}
    ${firstText ? `<p>${firstText}</p>` : ""}
  `;
}
</script>

<script src="https://moroccantapestash.blogspot.com/feeds/posts/default?alt=json-in-script&max-results=1&callback=show"></script>

</body>
</html>
